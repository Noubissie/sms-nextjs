generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Classes {
  id           Int            @id
  class        String         @unique
  sectionId    Int
  Section      Section        @relation(fields: [sectionId], references: [id_])
  ClassSubject ClassSubject[]

  @@index([sectionId], name: "sectionId")
}

model ClassSubject {
  id                 Int      @id
  classId            Int
  subjectId          Int
  subjectCoefficient Int
  Classes            Classes  @relation(fields: [classId], references: [id])
  Subjects           Subjects @relation(fields: [subjectId], references: [id])

  @@index([classId], name: "classId")
  @@index([subjectId], name: "subjectId")
}

model Gender {
  id             Int              @id
  gender         String?
  ParentProfile  ParentProfile[]
  StaffProfile   StaffProfile[]
  StudentProfile StudentProfile[]
}

model ParentProfile {
  id          Int     @id
  firstname   String?
  lastname    String?
  age         Int
  gender      Int
  email       String? @unique
  parentTitle Int
  phoneNumber String?
  Gender      Gender  @relation(fields: [gender], references: [id])
  Title       Title   @relation(fields: [parentTitle], references: [id])

  @@index([gender], name: "gender")
  @@index([parentTitle], name: "parentTitle")
}

model Position {
  id       Int     @id
  position String?
}

model Section {
  id_            Int              @id
  section        String           @unique
  languages      String?
  Classes        Classes[]
  StudentProfile StudentProfile[]
  Subjects       Subjects[]
}

model StaffProfile {
  id               Int       @default(autoincrement()) @id
  firstname        String?
  lastname         String?
  staffTitle       Int
  dateofbirth      DateTime?
  dateOfAssumption DateTime  @default(now())
  age              Int
  gender           Int
  email            String?   @unique
  phoneNumber      String?
  imagepath        String
  Gender           Gender    @relation(fields: [gender], references: [id])
  Title            Title     @relation(fields: [staffTitle], references: [id])

  @@index([gender], name: "gender")
  @@index([staffTitle], name: "staffTitle")
}

model StudentProfile {
  id               Int       @default(autoincrement()) @id
  familyname       String
  givenname        String
  dateofbirth      DateTime?
  gender           Int
  dateOfEnrollment DateTime  @default(now())
  age              Int
  religion         String
  bloodgroup       String
  email            String    @unique
  sectionid        Int
  AdmissionID      String    @unique
  phonenumber      String?
  StudentAddress   String?
  shortbiography   String
  studentPicture   String
  FatherName       String?
  FatherOccupation String?
  FatherAddress    String?
  FatherContact    String?
  MotherName       String?
  MotherOccupation String?
  MotherAddress    String?
  MotherContact    String?
  Gender           Gender    @relation(fields: [gender], references: [id])
  Section          Section   @relation(fields: [sectionid], references: [id_])

  @@index([gender], name: "gender")
  @@index([sectionid], name: "sectionid")
}

model Subjects {
  id           Int            @id
  subject      String?
  sectionId    Int?
  Section      Section?       @relation(fields: [sectionId], references: [id_])
  ClassSubject ClassSubject[]

  @@index([sectionId], name: "sectionId")
}

model Title {
  id            Int             @id
  title         String?
  ParentProfile ParentProfile[]
  StaffProfile  StaffProfile[]
}
